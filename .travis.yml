language: r
cache: packages
env:
  global:
    - ALLOWED_WARNINGS=0
    - ALLOWED_NOTES=0

r:
#  - oldrel
  - release
#  - devel

script:
  - echo $PROJECT
#  - Rscript -e "source('tmp.R')"
#  - git remote -v
#  - git remote set-url origin git@github.com:${TRAVIS_REPO_SLUG}
  - git config --global user.email "travis.tagger@example.com"
  - git config --global user.name "Travis tagging"
  - git remote -v
  - git remote set-url origin https://${GITHUB_PAT}@github.com/jumpingrivers/inteRgrate.git
  - git remote -v
#  - git config --global url."git@github.com:".insteadOf"https://github.com/"
  #- cd ..; mkdir tag; cd tag
  #- git clone git@github.com:${TRAVIS_REPO_SLUG}
  #- ls
  #- cd inteRgrate
  #- ls
  - git tag -a v1.2 -m "[skip travis] Version v1.2"
  - git push --tags

  # - cd ..; mkdir tag; cd tag
  # - git init
  # - git config user.name "Jumping Rivers"
  # - git config user.email "colin@jumpingrivers.com"
  # - git config --global push.default simple
  # - git clone --depth 1 "https://$GITHUB_PAT@github.com/jumpingrivers/inteRgrate.git"
  # - cd inteRgrate
  # - ls
  # - git tag v0.3 -a -m "Version v0.3"
  # - git push
  #

notifications:
  email:
    on_success: change
    on_failure: change

## Only run covr on release
#after_success:
#  - Rscript -e "if(length(grep('1\$', ${TRAVIS_JOB_NUMBER}))) covr::codecov()";



