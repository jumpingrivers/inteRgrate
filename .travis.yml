language: r
cache: packages
env:
  global:
    - ALLOWED_WARNINGS=0
    - ALLOWED_NOTES=0

matrix:
  include:
  - r: devel
  - r: release
    r_packages:
      - pkgdown
    env: R_CURRENT=true
    deploy:
      provider: script
      script: Rscript -e 'pkgdown::deploy_site_github(verbose = TRUE)'
      skip_cleanup: true
  - r: oldrel

script:
  - echo $TRAVIS_R_VERSION
  - Rscript -e "inteRgrate::install_pkg()"
  - Rscript -e "inteRgrate::check_pkg()"
  - Rscript -e "inteRgrate::check_r_filenames()"
  - Rscript -e "inteRgrate::check_tidy_description()"
  - Rscript -e "inteRgrate::check_lintr()"
  - Rscript -e "inteRgrate::check_namespace()"
  - Rscript -e "inteRgrate::check_version()"
  - Rscript -e "if(Sys.getenv('R_CURRENT') == 'true') inteRgrate::create_tag()"

notifications:
  email:
    on_success: change
    on_failure: change

